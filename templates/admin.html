<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>管理后台</title>
<style>
body{background:#121212;color:#eee;font-family:sans-serif;padding:15px;margin:0}
header{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;background:#252525;padding:15px;border-radius:10px}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:10px}
.card{background:#252525;border-radius:8px;padding:5px;position:relative}
.card img{width:100%;height:140px;object-fit:cover;border-radius:5px}
.actions{display:flex;gap:5px;margin-top:5px}
.btn{flex:1;padding:8px 0;border:none;border-radius:4px;color:#fff;text-align:center;text-decoration:none;font-size:12px;cursor:pointer}
.hide{background:#f39c12}.del{background:#e74c3c}.show{background:#27ae60}.upload{background:#3498db;padding:8px 20px;border-radius:5px;border:none;color:#fff}
h4{margin:20px 0 10px;color:#888;border-bottom:1px solid #333;padding-bottom:5px}
.tag{position:absolute;top:10px;left:10px;background:rgba(0,0,0,0.6);padding:2px 5px;font-size:10px;border-radius:3px;color:#f1c40f}
</style>
</head>
<body>
<header>
    <div><b>图片管理</b> <a href="/logout" style="color:#888;font-size:12px;margin-left:10px">退出</a></div>
    <form action="/upload" method="post" enctype="multipart/form-data">
        <input type="file" name="files" multiple required style="display:none" id="f">
        <label for="f" class="btn upload">上传图片</label>
        <button type="submit" class="btn upload" style="margin-left:5px">提交</button>
    </form>
</header>
<h4>公开展示 ({{ public_images|length }})</h4>
<div class="grid">
    {% for img in public_images %}
    <div class="card">
        <img src="/thumb/public/{{img}}" loading="lazy">
        <div class="actions">
            <a href="/toggle/public/{{img}}" class="btn hide">隐藏</a>
            <a href="/delete/public/{{img}}" class="btn del" onclick="return confirm('删除？')">删除</a>
        </div>
    </div>
    {% endfor %}
</div>
{% if hidden_images %}
<h4>隐藏仓库 ({{ hidden_images|length }})</h4>
<div class="grid">
    {% for img in hidden_images %}
    <div class="card" style="border:1px dashed #f39c12">
        <span class="tag">HIDDEN</span>
        <img src="/thumb/hidden/{{img}}" loading="lazy">
        <div class="actions">
            <a href="/toggle/hidden/{{img}}" class="btn show">公开</a>
            <a href="/delete/hidden/{{img}}" class="btn del" onclick="return confirm('永久删除？')">删除</a>
        </div>
    </div>
    {% endfor %}
</div>
{% endif %}
</body>
</html>
